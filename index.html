<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Document</title>
</head>
<body>
    <h1>Rock paper scissors</h1>
    <p id="score"></p>
    <script>
        
        function getComputerChoice(){
            const computer_weapon = Math.floor(Math.random()*3);

            return computer_weapon;
        }
        function playround(compC,humanC){
            //If human picks rock
            if(humanC === 0){
                if(compC === 0){
                    i--;
                    return ("tie! 2 rocks");
                }
                else if(compC === 1){
                    computerScore++;
                    return ("human loses! paper claps rock");
                }
                else if(compC === 2){
                    humanScore++; 
                    return ("human wins! rock booms scissors");
                }
                else{
                    return ("ERROR");
                }
            }
            //paper
            if(humanC === 1){
                if(compC === 0){
                    humanScore++;
                    return ("human wins! your paper eats the rock");
                }
                else if(compC === 1){
                    i--;
                    return ("tie! 2 papers");
                }
                else if(compC === 2){
                    computerScore++;
                    return ("human loses! your paper is cut by scissors");
                }
                else{
                    return ("ERROR");
                }
            }
            //scissors
            if(humanC === 2){
                if(compC === 0){
                    computerScore++;                    
                    return ("human loses! your scissors are smushed by rock ");
                }
                else if(compC === 1){
                    humanScore++;
                    return ("human wins! your scissors cuts the paper");
                }
                else if(compC === 2){
                    i--;
                    return ("tie! 2 scissors");
                }
                else{
                    return ("ERROR");
                }
            }

            return ("hmm");
        }

        function declareWinner(score1,score2){
            if (score1 > score2){
                return "Human wins"
            }
            else{
                return "Computer wins"
            }
        }

        function restartGame(){
            humanScore = 0;
            computerScore = 0;
        }
        
        let humanScore = 0;
        let computerScore = 0;
        let score = document.createElement("div");
        let change = document.createElement("div");
        //By instantiating i before the loop, we allow ourselves to make it so the scores always add up to 5
        //now that i is a global variable, we can decrement i by 1 when we tie, so we essentially erase that round
        i = 0;
        
        let rock = document.createElement("button");
        rock.textContent = "Rock";
        rock.addEventListener('click',()=>{
            console.log(humanScore + ' ' + computerScore);
            score.textContent = humanScore + ' ' + computerScore;
            change.textContent = playround(0,getComputerChoice());
            if(humanScore == 5 || computerScore == 5){
                score.textContent = declareWinner(humanScore,computerScore);
                console.log("Winner");
                restartGame();               
            }
        })

        let paper = document.createElement("button");
        paper.textContent = "Paper";
        paper.addEventListener('click',()=>{
            score.textContent = humanScore + ' ' + computerScore;
            change.textContent = playround(1,getComputerChoice());
            console.log(humanScore + ' ' + computerScore);
            if(humanScore == 5 || computerScore == 5){
                score.textContent = declareWinner(humanScore,computerScore);
                console.log("Winner");
                restartGame();
            }
        })

        let scissors = document.createElement("button");
        scissors.textContent = "Scissors";
        scissors.addEventListener('click',()=>{
            score.textContent = humanScore + ' ' + computerScore;
            change.textContent =  playround(2,getComputerChoice());
            console.log(humanScore + ' ' + computerScore);
            if(humanScore == 5 || computerScore == 5){
                score.textContent = declareWinner(humanScore,computerScore);
                console.log("Winner");
                restartGame();
            }
        })
        
        document.body.appendChild(rock);
        document.body.appendChild(paper);
        document.body.appendChild(scissors);
        document.body.appendChild(score)
        document.body.appendChild(change);
    </script>
</body>
</html>